{
"version":3,
"file":"module$node_modules$framesync$dist$framesync_cjs.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/framesync/dist/framesync.cjs.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$framesync$dist$framesync_cjs\"] = function(global,require,module,exports) {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar defaultTimestep = (1 / 60) * 1000;\nvar getCurrentTime = typeof performance !== \"undefined\"\n    ? function () { return performance.now(); }\n    : function () { return Date.now(); };\nvar onNextFrame = typeof window !== \"undefined\"\n    ? function (callback) {\n        return window.requestAnimationFrame(callback);\n    }\n    : function (callback) {\n        return setTimeout(function () { return callback(getCurrentTime()); }, defaultTimestep);\n    };\n\nfunction createRenderStep(runNextFrame) {\n    var toRun = [];\n    var toRunNextFrame = [];\n    var numToRun = 0;\n    var isProcessing = false;\n    var toKeepAlive = new WeakSet();\n    var step = {\n        schedule: function (callback, keepAlive, immediate) {\n            if (keepAlive === void 0) { keepAlive = false; }\n            if (immediate === void 0) { immediate = false; }\n            var addToCurrentFrame = immediate && isProcessing;\n            var buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (buffer.indexOf(callback) === -1) {\n                buffer.push(callback);\n                if (addToCurrentFrame && isProcessing)\n                    numToRun = toRun.length;\n            }\n            return callback;\n        },\n        cancel: function (callback) {\n            var index = toRunNextFrame.indexOf(callback);\n            if (index !== -1)\n                toRunNextFrame.splice(index, 1);\n            toKeepAlive.delete(callback);\n        },\n        process: function (frameData) {\n            var _a;\n            isProcessing = true;\n            _a = [toRunNextFrame, toRun], toRun = _a[0], toRunNextFrame = _a[1];\n            toRunNextFrame.length = 0;\n            numToRun = toRun.length;\n            if (numToRun) {\n                for (var i = 0; i < numToRun; i++) {\n                    var callback = toRun[i];\n                    callback(frameData);\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                }\n            }\n            isProcessing = false;\n        },\n    };\n    return step;\n}\n\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0,\n};\nvar stepsOrder = [\n    \"read\",\n    \"update\",\n    \"preRender\",\n    \"render\",\n    \"postRender\",\n];\nvar steps = stepsOrder.reduce(function (acc, key) {\n    acc[key] = createRenderStep(function () { return (runNextFrame = true); });\n    return acc;\n}, {});\nvar sync = stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) { keepAlive = false; }\n        if (immediate === void 0) { immediate = false; }\n        if (!runNextFrame)\n            startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nvar cancelSync = stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar flushSync = stepsOrder.reduce(function (acc, key) {\n    acc[key] = function () { return steps[key].process(frame); };\n    return acc;\n}, {});\nvar processStep = function (stepId) { return steps[stepId].process(frame); };\nvar processFrame = function (timestamp) {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed\n        ? defaultTimestep\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing)\n        onNextFrame(processFrame);\n};\nvar getFrameData = function () { return frame; };\n\nexports.cancelSync = cancelSync;\nexports.default = sync;\nexports.flushSync = flushSync;\nexports.getFrameData = getFrameData;\n\n};"],
"names":["shadow$provide","global","require","module","exports","createRenderStep","runNextFrame","toRun","toRunNextFrame","numToRun","isProcessing","toKeepAlive","WeakSet","step","schedule","callback","keepAlive","immediate","buffer","addToCurrentFrame","add","indexOf","push","length","cancel","index","splice","delete","process","frameData","_a","i","has","Object","defineProperty","value","defaultTimestep","getCurrentTime","performance","now","Date","onNextFrame","window","requestAnimationFrame","setTimeout","useDefaultElapsed","frame","delta","timestamp","stepsOrder","steps","reduce","acc","key","sync","processFrame","cancelSync","flushSync","processStep","stepId","Math","max","min","maxElapsed","forEach","default","getFrameData"]
}
