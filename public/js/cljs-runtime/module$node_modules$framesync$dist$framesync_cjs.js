shadow$provide.module$node_modules$framesync$dist$framesync_cjs=function(global,require,module,exports){function createRenderStep(runNextFrame){var toRun=[],toRunNextFrame=[],numToRun=0,isProcessing=!1,toKeepAlive=new WeakSet,step={schedule:function(callback,keepAlive,immediate){void 0===keepAlive&&(keepAlive=!1);void 0===immediate&&(immediate=!1);var buffer=(immediate=immediate&&isProcessing)?toRun:toRunNextFrame;keepAlive&&toKeepAlive.add(callback);-1===buffer.indexOf(callback)&&(buffer.push(callback),
immediate&&isProcessing&&(numToRun=toRun.length));return callback},cancel:function(callback){var index=toRunNextFrame.indexOf(callback);-1!==index&&toRunNextFrame.splice(index,1);toKeepAlive.delete(callback)},process:function(frameData){isProcessing=!0;var _a=[toRunNextFrame,toRun];toRun=_a[0];toRunNextFrame=_a[1];toRunNextFrame.length=0;if(numToRun=toRun.length)for(_a=0;_a<numToRun;_a++){var callback=toRun[_a];callback(frameData);toKeepAlive.has(callback)&&(step.schedule(callback),runNextFrame())}isProcessing=
!1}};return step}Object.defineProperty(exports,"__esModule",{value:!0});var defaultTimestep=1/60*1E3,getCurrentTime="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},onNextFrame="undefined"!==typeof window?function(callback){return window.requestAnimationFrame(callback)}:function(callback){return setTimeout(function(){return callback(getCurrentTime())},defaultTimestep)},useDefaultElapsed=!0,runNextFrame=!1,isProcessing=!1,frame={delta:0,timestamp:0},
stepsOrder=["read","update","preRender","render","postRender"],steps=stepsOrder.reduce(function(acc,key){acc[key]=createRenderStep(function(){return runNextFrame=!0});return acc},{});global=stepsOrder.reduce(function(acc,key){var step=steps[key];acc[key]=function(process,keepAlive,immediate){void 0===keepAlive&&(keepAlive=!1);void 0===immediate&&(immediate=!1);runNextFrame||(useDefaultElapsed=runNextFrame=!0,isProcessing||onNextFrame(processFrame));return step.schedule(process,keepAlive,immediate)};
return acc},{});require=stepsOrder.reduce(function(acc,key){acc[key]=steps[key].cancel;return acc},{});module=stepsOrder.reduce(function(acc,key){acc[key]=function(){return steps[key].process(frame)};return acc},{});var processStep=function(stepId){return steps[stepId].process(frame)},processFrame=function(timestamp){runNextFrame=!1;frame.delta=useDefaultElapsed?defaultTimestep:Math.max(Math.min(timestamp-frame.timestamp,40),1);frame.timestamp=timestamp;isProcessing=!0;stepsOrder.forEach(processStep);
isProcessing=!1;runNextFrame&&(useDefaultElapsed=!1,onNextFrame(processFrame))};exports.cancelSync=require;exports.default=global;exports.flushSync=module;exports.getFrameData=function(){return frame}}
//# sourceMappingURL=module$node_modules$framesync$dist$framesync_cjs.js.map
